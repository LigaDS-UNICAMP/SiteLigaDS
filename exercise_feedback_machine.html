<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Exercício - Machine Learning Avançado</title>
    <link rel="stylesheet" href="styles2.css">
</head>
<body>
    <!-- Cabeçalho -->
    <header>
        <h1 id="exerciseTitle">Exercício</h1>
        <a href="capacitations_machine.html" id="backLink" class="button">Voltar à Capacitação</a>
    </header>

    <!-- Conteúdo Principal -->
    <main class="exercise-container">
        <section class="exercise-section">
            <h2 id="exerciseName">Exercício</h2>
            <div id="exerciseContent">
                <!-- Conteúdo do exercício será inserido aqui -->
            </div>
            <div id="feedbackContent" class="feedback-message">
                <!-- O feedback será inserido aqui -->
            </div>
        </section>
    </main>

    <!-- JavaScript -->
    <script>
        // Simula o tipo de usuário
        const userType = sessionStorage.getItem("userType") || "externo";

        // Obtém os parâmetros da URL
        const urlParams = new URLSearchParams(window.location.search);
        const capacitationName = urlParams.get('capacitation') || 'Machine Learning Avançado';
        const exerciseId = urlParams.get('exerciseId');

        // Dados dos exercícios
        const exercisesData = {
            1: {
                title: "Exercício 1: Regressão Linear",
                question: "Implemente uma regressão linear simples utilizando o conjunto de dados fornecido.",
                correctAnswer: "codigo1" // Pode ser uma resposta simulada
            },
            2: {
                title: "Exercício 2: Árvores de Decisão",
                question: "Desenvolva uma árvore de decisão para classificação de dados.",
                correctAnswer: "codigo2"
            },
            3: {
                title: "Exercício 3: Redes Neurais",
                question: "Crie uma rede neural básica para reconhecimento de dígitos.",
                correctAnswer: "codigo3"
            }
        };

        // Atualiza o título e link de volta
        const exerciseData = exercisesData[exerciseId];
        if (exerciseData) {
            document.getElementById('exerciseTitle').innerText = exerciseData.title;
            document.getElementById('exerciseName').innerText = exerciseData.title;
            document.getElementById('backLink').href = `capacitations_machine.html`;

            // Exibe a pergunta do exercício
            const exerciseContent = document.getElementById('exerciseContent');
            exerciseContent.innerHTML = `
                <p>${exerciseData.question}</p>
                <form id="exerciseForm">
                    <label for="userAnswer">Seu Código:</label><br>
                    <textarea id="userAnswer" name="userAnswer" rows="10" cols="50" required></textarea><br>
                    <button type="submit" class="button">Enviar Resposta</button>
                </form>
            `;
        } else {
            document.getElementById('exerciseContent').innerText = "Exercício não encontrado.";
        }

        // Manipula o envio do formulário
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('exerciseForm');
            if (form) {
                form.addEventListener('submit', function(event) {
                    event.preventDefault(); // Evita o recarregamento da página

                    const userAnswer = document.getElementById('userAnswer').value;
                    const feedbackContent = document.getElementById('feedbackContent');

                    // Simulação de verificação da resposta
                    if (userAnswer.trim() !== "") {
                        // Marca o exercício como concluído no localStorage
                        const key = capacitationName + '_exercise_' + exerciseId;
                        localStorage.setItem(key, 'completed');

                        feedbackContent.innerText = "Resposta enviada com sucesso! Aguarde o feedback.";
                        feedbackContent.style.color = "green";
                    } else {
                        feedbackContent.innerText = "Por favor, insira seu código.";
                        feedbackContent.style.color = "red";
                    }
                });
            }
        });
    </script>
</body>
</html>
