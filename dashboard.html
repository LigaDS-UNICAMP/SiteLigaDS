<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Dashboard - Liga de Data Science UNICAMP</title>
    <link rel="stylesheet" href="styles2.css">
</head>
<body>
    <!-- Cabeçalho -->
    <header>
        <h1>Bem-vindo, <span id="username"></span>!</h1>
        <nav>
            <a href="profile.html" class="button">Meu Perfil</a>
            <!-- Link para o dashboard do gerente (apenas para gerentes) -->
            <a href="gerente-dashboard.html" id="gerenteLink" class="button" style="display: none;">Dashboard Gerente</a>
            <a href="login.html" class="button" onclick="logout()">Sair</a>
        </nav>
    </header>

    <!-- Conteúdo Principal -->
    <main class="dashboard-container">
        <h2>Capacitações Disponíveis</h2>
        <div id="capacitations" class="capacitations-list">
            <!-- Capacitações serão inseridas aqui via JavaScript -->
        </div>
    </main>

    <!-- JavaScript -->
    <script>
        // Verificar se o usuário está logado
        const currentUser = JSON.parse(sessionStorage.getItem('currentUser'));
        if (!currentUser) {
            // Redireciona para a página de login se não estiver logado
            window.location.href = "login.html";
        }

        // Função para verificar permissões
        function checkPermission(requiredRole) {
            if (!currentUser) {
                return false;
            }
            
            // Hierarquia de permissões
            const roleHierarchy = {
                'externo': 0,
                'membro': 1,
                'gerente': 2
            };
            
            return roleHierarchy[currentUser.role] >= roleHierarchy[requiredRole];
        }

        // Exibir nome do usuário
        document.getElementById("username").innerText = currentUser.username || "Usuário";

        // Mostrar link do dashboard do gerente apenas para gerentes
        if (currentUser.role === 'gerente') {
            document.getElementById("gerenteLink").style.display = 'inline-block';
        }

        // Lista de capacitações disponíveis
        const capacitations = [
            {
                title: "Introdução à Ciência de Dados",
                description: "Aprenda os conceitos básicos de Ciência de Dados.",
                link: "capacitations.html",
                membersOnly: false
            },
            {
                title: "Machine Learning Avançado",
                description: "Aprofunde-se em técnicas avançadas de Machine Learning.",
                link: "capacitations_machine.html",
                membersOnly: true
            },
            {
                title: "Análise de Dados com Python",
                description: "Utilize Python para análise de dados eficiente.",
                link: "capacitation_python.html",
                membersOnly: false
            },
            // Adicione mais capacitações conforme necessário
        ];

        const capacitationsList = document.getElementById("capacitations");

        // Exibe as capacitações disponíveis de acordo com o tipo de usuário
        capacitations.forEach(cap => {
            // Usuários externos só veem capacitações não exclusivas para membros
            // Membros e gerentes veem todas as capacitações
            if (currentUser.role === 'membro' || currentUser.role === 'gerente' || 
                (currentUser.role === 'externo' && !cap.membersOnly)) {
                const capItem = document.createElement("div");
                capItem.className = "cap-item";
                capItem.innerHTML = `
                    <h3>${cap.title}</h3>
                    <p>${cap.description}</p>
                    <a href="${cap.link}" class="button">Acessar</a>
                `;
                capacitationsList.appendChild(capItem);
            }
        });

        function logout() {
            sessionStorage.removeItem('currentUser');
            window.location.href = "login.html";
        }
    </script>
</body>
</html>